---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","title":"Messages","description":"The messages to pass an input to the agent.","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message."},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","required":["text","type"],"title":"MessageTextBlock","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"]}}}}}}},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      