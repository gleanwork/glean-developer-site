---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      