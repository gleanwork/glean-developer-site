---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      