---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      