---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: eJztGdty27j1V1D0oVRGomzZTmKm7tZxnKzaxPFYTvtgahKIPJIQkwADgLI1Gs30I/qF/ZLOAUCRutm7ndmZfaheTAMHB+d+w4IaNtE0uqPnExBG02GbpqATxQvDpaARvXyEpDSgCRPkjiHQMJgaU+io201hBpksQOlwkgETYSLzroXR/k+HFbxFVCkIEylRYEolNDFTIAp0mRnCNGFEGwUsJ3JMNKgZqI4GYQjMEAMJBoPLVkhevLiSBl68iEh/bBHYC0ipHWlcFKUhY6lyYhSfTEC1CcsytzLmkKWaBFwkWZlyMSHSsscyv9UieakNGQFxIJASLuwt3yzib0SOvkNiQtqmyC/D0/2URjRRwAyci3RgebgpBW3Tx86Maz7iGTdzGtFrBTMOD7RNFfwoQZu3Mp3TaEETKQwIg5+sKDKeWLzd7xolv6A6mULO8GtdJddsnkmWIm/E3o8cMZQyiqmfF1IZJsyvklWTVysTwjVBcrmC1CrPSsiLx4nWSTWFMRe1wCxaR3lILmcgKricqXtEpWvh+yNf+nvF7wX2n3/9u9SAtENemDkaDPIcfItpTL+1rCQ2VEoeuJnK0pAZy0rQIfmcc2MlteKqaRsPPMsqm+SCMHJycEBAKalQ52ZeAI2oMwKvR0SBjmNl+5Wn6DqFQuswHLTVabUTLSoMjnDEyE2GC9btSD+lm353OwXSf4c+USvQSKtkumxTq6oG4hVpFeK+BdiF1anfyBpxSG4qmTxMQfwik0GxsDTlTujXDcaNKmHZpjlozSZOEp5IphSb0zblBnK9i/h1+SmJnOyX3Q3u7+IQD1aS82QgufDI8sKe/DK4vEEpNhywQnrhl3bh9eA7UP9vDBp4NNsMLit025yDKHO0OXtw2N4k+hbBl8t1+7SwHmXjyCdH/C08mreZTO7pEg9u7NLtJb1TMpWy0awKphs2s2Zn1NqFYSkz7Cnj/VTB7L7Lba7uWr/iSbNcbnjeTSkubAR37Ndy80asQBdSaKeu3sHBdjAelEkCGqXSNCZ4NF2bvzout62H8021bvPo8qCLShpEupYkfWLkYm+6tJ7KzLrR8zQih7GwcFGlsVigKCOyiFcOG9PobhFb74tpFNMPHy/Pr76e92PajismPQzyaWF+hiyTFgB5s0tubzlcDpexiAXe3vuNbm8/e/PRb3Qz6f8pf/by49/q8rks1RO3o00v2/R4l9m+ZWmVXKmFOdqGeS/ViKcpCAdxvA1xJQ15L0uRrpv/08XMvnB+idn2xjvcllfY3UqAvpLEHK5kbr3fucKK5dNtYi+kGGfcxpnfFa293jat/2AZTy1RxCL7ndF8ssuk+sKAwgLMBy9bPdl09NjRBbB7YHremShZFlg4ZxzDtWsT6DqMYDl05AyU4ilSrkrhymsLl8gUBjaoYeOyoBkTE6yK52YqsfrO2Aiy1QIJzq/75MLe1qJtqmWpEkRqOXNtCyv4V0cP4bZ6Jh9wPRb+P6nRlWOBJaXbCmJBCCF40Mh7EGdShxMwIGbBynev+19vP//98iqmbYJ1aqvtDnGhDRMJ7DjTvxrcnl9dXDaPtLBktnRGSANiUKDJmad9TY6hKsVXlyiCqvo8i+mfefoXRFkFm7M7hwd/i/oTf6sQRGJbJWF4WQEs/fewVVHyR/IzE2lm2zlrV265UFyYQIFu0WV7paG/sRkbWINpaAlrFmdFezXltbBwoidLZ5Qx/auVwINU911W8I6TREzfIHGJFNo4EZEzIuDB682yywp+i1qLSKEkZu8QxOxuh+KG5KefrCIs45Xidh+rddc8tWxZcpiei4SMS5FYn1alCFpO9I5Q33mcEfbAuNmnWucEgVeZXe+nqCmvYLdeaTkiKzU3lIzq3aHclWrtX0+1o05mEGZyEjgaccdmNsvDm6Z+P8iGXj/IvfosWHKPQSZn3LqV028Qi9j4XIdJzP0rtftiBXfimEgS0wk303Jkxw27bKAzkdX55yG7uUwh091E5oUUKOrqbCYn+GmNHVVnCa70RkhiHkl0RjzB4VuW3GNwE2mwcg+NAA3Swyt4CGpdNHf+yc10AEmpuJkHUocf9kaTVqu9H0Xf2+gOFLWBrjC0GhGljQEb6dWh01noRkLhzcrwEvPYJrWcwvUSumFkdqP/bss08fepNs9hA5df3ghHzwLg78aadFMS15JjMgoqM29KrGntze9ly4fnsRXEH86I4FnTczI5Cd8zw7IAlPLAy9UZBTq8Ab3jXLdLpruC5DIWy83w2HAg/PdZF5pi3R0+SJWlb2pXIt/ZjIWINrx8TMAm6Dfrm6XhWfiRa1OvSzUJZQGCFVxXH6GNms/AOAcK9xrGrz7uVf3Lzq3mcTq82BrGVeWOFU5RjjKekCTDpvG8rqFQWT5vOQhtmOEJmUmeOp8f2FrqbkiYmugWMVMlHzRZybZGgD+XpXR6T87cdzgqeZaCClrbthtWuSgYzLWBvKoIWvjxWb2DMSsz80RRsYHT3RVU8bvhjit1YN1PzjYWn6bRZZqg8uZdMFXWCdCoQjkOtmEa3v/UdSuUmKpqF34C0PO8KYu98thvJ7600um9z75By+ffoNXIwLsu8t1UoODHru2EZdkGGXxMMKmGChA719cKtL2ytVmV7QshpA5BLpoMseE3IDT6g62O7wFH0GsT6Ta1M9HGZBqjUAW4WarX0Osl++4z66V7fbYu4ZHGHMxU4vi8kNqOxZiZ0oh2FWiD2bk7O6zeEVQpdFdX1b9rLRxnpcIwWb1FLKrqbNkZQf0cYUlQnI0yN8OpoFz7Yp0LK0y/asnfMzR1EAQhSGDmBUeNzm1vBDnjGUklxorV3Bk3bj++w2jBDEnBgMq5APf6kUKRyXmOHceIJfcg0hBbqyFy6GoAy+L5dd8GBxrdDZubA2z2HEM1iO8BUdojYApUPZdEIdlODLvFm/oR4rIaDjWH1XXnWA2Z16a5d9Vg1k1RG43pXTXRbPSe7n67vBx61Vfjv6WdY48lXo9addI+CE/Dg0bb6sIp5sEOOW90izYVdhKZ59x09JTRiPZOGRwdHB++PH41Pk5Oe+OD5OjoKH05Gh/1TtiInRz0RunLcW9Lw4gdRFpg2aDta0LjpkxOLInr9saKovHoxXMUjisxO8htL9QzO8p97GC+6tiSs0lrcnLy6vBVL32Vnr4+PWTs5PD16clxb3x0dMhevT55fXhwfPL65fFoR2vcFApegU6UM2sBftsHeib8GL96gPMzRP/+tnMQ0HiV+v/b3+bbX8Ocu0XGuJ2MWbtY+Bh2hyNjDGms4Bh7DvGzsiWMZRjEXDQbtukUw190RxeLEdPwRWXLJS7/KEFhABjWwctGgDadAktBNQK7n/x37Oi/DrdbE6I6Wp8nWLU0YLeH1Wsh+vrz4Ja26ci/WWLVhfGc2fdM9kAjah9Fjcs4C7fmitoSnxAi6gjA338BBjAv/A==
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      