---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      