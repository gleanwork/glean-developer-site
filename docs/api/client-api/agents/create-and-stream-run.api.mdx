---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      