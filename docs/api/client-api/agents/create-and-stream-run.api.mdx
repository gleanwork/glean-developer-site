---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      