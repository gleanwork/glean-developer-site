---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: eJzNWW1v2zgS/is83oeVAVvOa9uol9tL07TrvTYN4uzdB8soaGlss5FIlaQcG4b++2JIyZJtObk9oED1xTI5HM7rw+FoTQ2baRqM6NUMhNF03KUx6EjxzHApaEBvlhDlBjRhgowYEo29uTGZDvr9GBaQyAyU9mcJMOFHMu1bGl3+9FjGO0TlgjAREwUmV0ITMweiQOeJIUwTRrRRwFIip0SDWoDqaRCGwAI5EG84vOn4tEtxI4ZSDWIa0EgBM3Al4qFdfJ8L2qXL3oJrPuEJNysa0DsFCw5PtEsVfM9Bm3cyXtFgTSMpDAiDryzLEh5Zvv1vGlVeUx3NIWX4tm2LO7ZKJIvJVCpi9+diRhiqh/KZVQY0oHLyDSJT7skVxGhda42vPEb7Zgo1MRy03b+aCdYVB20UFzPkyE2CA9Y3ZBDTXec8zIEM3qPh0KSWFTHSCVR0KRdZbhqMN6JVjAeWoI2rXYq8NoxRRRbHHIlYctdQwqgcii5NQWs2c1qVGzKl2Ip2KTeQ6jZBtm2hJEp12A73ON8mLS6srFCKgeLCkqWZXfnH8OYeLdJwfMX0uhxq41uSt7D+/xQ0sDT7ChYVu33NQeQpxo9dOO7uCv2A5EWxHWuWtmTZWPLZCf8AS/MukdEjLXDhzizdH9KtlqmcjSGSMW3hoS1mbFwYFjPDngvEzxVN+15ucrPXXwjLYieL7nNxbZHDqV/brQxiBTqTQjt3nRwd7YPAMI8i0GiVZjDB0vQtYPUcmG3DyK5b93V0wEeeeJIQDSLeQsUSCbk4iI8ISSkz20HP44Ach8LSBZXHQoGmDMg63CRsSIPROrTZF9IgpB8/3Vzdfr0ahLQbVkqWNKinpfkNkkRaAtTNDrm5YlyMi1CEAnc/+UG7d1/c+fQH7UwGv6Qvbn72ozZfyVw9szvGdNGlZ21h+47h+WtPQWppTvdpPkg14XEMwlGc7VPcSkM+yFzE2+H//CF6CM5vlJLqvky4vayws5UBy9IBYjJVMrXZ71Jho/LFvrDXUkwTbnHmp5L15GRf1v+whMdWKGKZ/WQyn7eF1EAYUIIlFXiBFRzJlz2dAXsEple9mZJ5hgVbwhGuXV1It2kES6EnF6AUj1FylQtX1lm6SMYwtKCGleqaJkzMsBpbmbnEqi9hE0g2A8S7uhuQa7tbh3aplrmKkKnVzNWpLONfnTyEp5lUhnzE8VCU/6TGVA7FEzdzN+WFghBCcKGRjyAupfZnYEAsvE3u3g2+Pnz5981tSLskpCHtdN0iLrRhIoKWNYPb4cPV7fVNc0kHi2IrZ4AyIAcFmlyWsm/Z0Ve5+OoOCq+qJC9D+g8e/xNZVmBzOXJ88FnXr/hsIIiEtkpCeNkQFOX7uFNJ8nfyGxNxYut3G1duOFNcGE+B7tCiu/HQ72zBhjZgGl7CmsVF0UFPlV5YO9OTwgVlSP9lLfAk1WOfZbznLBHStyhcJIU2zkTkkgh4Kv1m1WUZf0CvBSRTEk9vH8Ri1OK4Mfn1V+sIq3jluPZlte+aq4qOFYfplYjINBeRzWmVC6/jTO8ELa8/l4Q9MW4OudYlgVe6zI4PYvRU6WA3Xnk5IBs3N5yM7m1x7sa19reU2kknE/ATOfOcjDhjTzarw9umfz/Khl8/yoP+zFj0iCCTMm7TyvnXC0VoyrMODzH3V2r3xjLuzDGTJKQzbub5xN4v22KgN5PV+pcp+6mMIdH9SKaZFGjqam0iZ/hqgx1dZwWu/EZIZJYkuCSlwP47Fj0iuInY26SHRoKG6P4tPHm1L5oz/+VmPoQoV9ysPKn9jwfRpNPpHmYxKGO0hUUdoBsOnQaidBGwUV7tO5/5rgfg328CLzLLLqnt5G+X0I0gsxOD93uhic/nOjzHDV7l8A4cvUiAz70N6aYl7iTHw8irwrxpsWa0N9+LTgnPU2uIv10SwZNm5iRy5n9ghiUeKFUSF5s1CrR/D7plXb9P5m0gWYSi2IXHRgLh3xdTaI51t/8kVRK/rVOJfGML5iNb/2YZgT2g325P5oYn/ieuTT0u1cyXGQiWcV29+BY1X6BxCeQfDIy/vLx09f+2btMH0v71XhOoKnescbJ8kvCIRAleGq/qGgqdVZ5bjkIbZnhEFpLHLueHtpYajQlTM90hZq7kkyYb29YM8HGnlI4fyaV79yc5T2JQXmc/dv3qLPKGK20grSqCDr58Ue9hyvLEPFNU7PB0e3kVfjfSceMOrPvJ5c7g8zK6k8arsrmNpjp1PAwqX069fZpG9j+33YYlHlV1Cj9DWOq8a4uD9jgcJ2VppePH8vT1OuX563UaJ3DbRuVtylPwvW06YkmyIwafEjxUfQXInes7Bdpu2dmtyg5BCKkhyKHJGC/8BoTGfLDV8SNg63OrE9qlC5bk0OiIIgpVhLulek29XbK3r9ku3eu1dQmPMqZg5hLbtpnUti3GzJwGtK9AGzyd+4vjqnGscqH7uqr+3dXCaZYrhMmq+byuqrOiN4G6/2xFUJxNEtfDqajc9cUmF1aY5agV/0AD1FEQpCCeWWUcPbqydyNIGU9ILBErCF4SJDa+5kAePr1HtGCGxGBApVyAa3fHkCVyleKNY8KiRxCxj1erMWroagCr4tXdwIIDDUbj5uQQL3tOoZqkvAOitSfAFKi6L4lGsjcxvC3e183vm6o51Gw81zfHqmG81c0dVY1Z10VtXExHVUezcfd0+9vhYly6vmr/FbYnPZW4PXrVWfvIv/CPGtdWB6d4DvbIVeO2aI/CXiTTlJuenjMa0Pjs4oIdnwJAfBq/Pn8FMIUjdgwRY1N2eh6dvn7z5mxycr7nYeQOIs6wbNC2n9/YKZEzK+J2vLEsa3zl4Ckax5WYPdT2xNcL28pd9vC86tmSsynr9OTV5A0cTc6PL05PTo5OL45PT4+PpmfHR0fx6ZspO3n95lV0zi5arsZNo+AWmEQpsxFQTpdAz0T5EaD64lL2EMsPLq2NgMbXkJ/oY08jjvpZwrhtSVmHrEvwGGGvFrGEZRyT/hhfKyciiCB6OBgZd+kccScY0fV6wjT8oZKiwOHvOSjMvHGNGjb1unQOLAbVQNSy5d6zPfca5/ZaMzVMXkVYLjRo97vEW9h492X4QLt0Un6kwnIHgZTZD1jsiQbUfgUzDurXbsxVkzn27gPqBMDnTwsOROA=
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      