---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      