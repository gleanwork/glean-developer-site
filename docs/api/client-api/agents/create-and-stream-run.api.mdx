---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      