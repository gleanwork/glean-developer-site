---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      