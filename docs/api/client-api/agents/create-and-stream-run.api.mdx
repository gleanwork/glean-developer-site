---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: eJzNWV9v2zgS/yo83sPJgC0nadPE7uX20jbteq9Ngzh79xAZBS2NbTYSqZKUE8PQdz8MSVmyLSe3BxRYvVgmh8P5++NwtKaGzTUd3tPLOQij6aRLE9Cx4rnhUtAhvXqCuDCgCRPkniHRJFgYk+thv5/AElKZg9LhPAUmwlhmfUuj/U+P5bxDVCEIEwlRYAolNDELIAp0kRrCNGFEGwUsI3JGNKglqJ4GYQgskQMJxuOrTki7FDdiKNUooUMaK2AGLkUytotvC0G79Km35JpPecrNig7pjYIlh0fapQp+FKDNO5ms6HBNYykMCIOvLM9THlu+/e8aVV5THS8gY/i2bYsbtkolS8hMKmL352JOGKqH8plVDnRI5fQ7xMbvyRUkaF1rjW88QfvmCjUxHLTdv5oZrisO2igu5siRmxQHrG/IKKG7zrlbABl9QMOhSS0rYqQTqOxSLvLCNBhvRKsYjyxBG1e7FHltGKOKLEk4ErH0pqGEUQWUXZqB1mzutPIbMqXYinYpN5DpNkG2baEkSnXYDrc43yYtLqys4MVAceGJZbld+fv46hYt0nB8xfS9H2rj68lbWP9/Chp4MvsKlhW7fc1BFBnGj1046e4KfYfkZbkda5bWs2ws+eKEv4Mn8y6V8QMtceHOLN0f0q2WqZyNIZIzbeGhLWZsXBiWMMOeC8QvFU37Xm5ys9cfCMtyJ4tuC/HeIodTv7abD2IFOpdCO3edHB3tg8C4iGPQaJVmMMGT6VvA6jkw24aRXbfu6+iAjzzyNCUaRLKFih4JuTiIjwhJGTPbQc+TITmOhKUbVh6LBJpySNbRJmEjOrxfRzb7IjqM6KfPV5fX3y5HEe1GlZKeBvW0NL9CmkpLgLrZITdXTspJGYlI4O4nP2n37os7v/pJO5PR37IXN3/9szZfyUI9szvGdNmlr9vC9h3D89eegtTSvNqn+SjVlCcJCEfxep/iWhryURYi2Q7/5w/RQ3B+pZRUtz7h9rLCzlYG9KUDJGSmZGaz36XCRuXBvrDvpZil3OLMn0rWk5N9Wf/NUp5YoYhl9ieT+bQtpEbCgBIsrcALrOBI/tTTObAHYHrVmytZ5FiwpRzh2tWFdJtGsAx6cglK8QQlV4VwZZ2li2UCYwtqWKmuacrEHKuxlVlIrPpSNoV0M0CCy5sReW9369Au1bJQMTK1mrk6leX8m5OH8CyXypBPOB4J/09qTOVIPHKzcFNBJAghBBca+QDiQupwDgbEMtjk7s3o293Xf11dR7RLIhrRTtct4kIbJmJoWTO6Ht9dXr+/ai7pYFFs5RyiDMhBgSYXXvYtO4aqEN/cQRFUleRFRP/Ok38gywpsLu4dH3zW9Ss+Gwgika2SEF42BKV/n3QqSf5KfmUiSW39buPKDeeKCxMo0B1adjce+o0t2dgGTMNLWLO4KDroKe+FtTM9KV1QRvSf1gKPUj30Wc57zhIRfYvCxVJo40xELoiAR+83qy7L+R16bUhyJfH0DkEs71scNyG//GIdYRWvHNe+rPZdc1XZseIwvRIxmRUitjmtChF0nOmdoP76c0HYI+PmkGtdEgTeZXZ8lKCnvIPdeOXlIdm4ueFkdG+Lczeutb9eaiedTCFM5TxwMuKMPdmsDm+b/v0kG379JA/6M2fxA4JMxrhNK+ffIBKR8WcdHmLur9TujeXcmWMuSUTn3CyKqb1ftsVAby6r9S9T9jOZQKr7scxyKdDU1dpUzvHVBju6zgpc+Y2Q2DyR4QXxAofvWPyA4CaSYJMeGgkaoofX8BjUvmjO/IebxRjiQnGzCqQOPx1Ek06ne5jFyMdoC4s6QDccOg1E6SJgo7w6dD4LXQ8gvN0EXmyeuqS2U7hdQjeCzE6MPuyFJj5f6vCcNHj54R04epEAn1sb0k1L3EiOh1FQhXnTYs1ob76XHQ/PM2uIv1wQwdNm5qRyHn5khqUBKOWJy80aBTq8Bd2yrt8nizaQLCNR7sJjI4Hw74sptMC6O3yUKk3e1qlEvrMlC5FtePUUgz2g325PFoan4WeuTT0u1TyUOQiWc129hBY1X6BxCRQeDIw/vNy7+n9bt+kD6fD9XhOoKnescfJimvKYxCleGi/rGgqd5c8tR6ENMzwmS8kTl/NjW0vdTwhTc90hZqHkoyYb29YM8HGnlE4eyIV7D6cFTxNQQWc/dsPqLArGK20gqyqCDr58VR9gxorUPFNU7PB0ewUVfjfSceMOrPvJxc7g8zK6kyaosrmNpjp1AgyqUM6CfZpG9j+33YYlHlV1Cj9D6HXetcVBexyOE19a6eTBn75Bx5+/QadxArdt5G9TgYIfbdMxS9MdMfiM4KEaKkDuXN8o0HbLzm5VdghCSA1BDk0meOE3IDTmg62OHwBbn1ud0C5dsrSARkcUUagi3C3Va+rtkr19zXbpXq+tS3iUMQOzkNi2zaW2bTFmFnRI+wq0wdO5vzyuGseqELqvq+rfXS2cZoVCmKyaz+uqOit7U6j7z1YExdk0dT2cispdX2xyYYXpR634BxqgjoIgBQnMKufo0ZW9G0HGeEoSiVhB8JIgsfG1AHL3+QOiBTMkAQMq4wJcuzuBPJWrDG8cUxY/gEhCvFpNUENXA1gVL29GFhzo8H7SnBzjZc8pVJP4OyBaewpMgar7kmgkexPD2+Jt3fy+qppDzcZzfXOsGsZb3dz7qjHruqiNi+l91dFs3D3d/na4nHjXV+2/0vakZxK3R686ax+Fg/CocW11cIrnYI9cNm6L9ijsxTLLuOnpBcMAPTs/np4PTiB5NXiTvGFHDODoNRvA+enR4AymjJ0fMzh7s+dh5A4iybFs0Laf39gplXMr4na8sTxvfOXgGRrHlZg91PYk1Evbyn3q4XnVsyVnU9Y3g9NXbHB6fDZ7MzsdsAFMB/HZ+enZ6cnx+fGAnZwMzhM2BWi5GjeNgltgEmXMRoCf9kDPhP8IUH1x8T1E/8GltRHQ+BryJ/rY04ijfp4ybltS1iFrDx732KtFLGE5x6Q/xtfKiQgiiB4ORiZdukDcGd7T9XrKNPyu0rLE4R8FKMy8SY0aNvW6dAEsAdVAVN9y79mee41ze62ZGiYvYywXGrT7XeItbLz5Or6jXTr1H6mw3EEgZfYDFnukQ2q/ghkH9Ws35qrJAnv3Q+oEwOe/MAFFHQ==
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      