---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      