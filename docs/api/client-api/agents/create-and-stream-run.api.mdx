---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      