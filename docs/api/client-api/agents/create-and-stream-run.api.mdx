---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      