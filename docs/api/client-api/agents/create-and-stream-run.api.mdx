---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      