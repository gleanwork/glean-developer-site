---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      