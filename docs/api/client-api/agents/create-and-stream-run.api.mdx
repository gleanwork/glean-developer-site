---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      