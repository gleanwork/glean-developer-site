---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      