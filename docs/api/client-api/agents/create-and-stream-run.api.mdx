---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      