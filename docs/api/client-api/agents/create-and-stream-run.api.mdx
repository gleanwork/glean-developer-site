---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE). **Note**: If the agent uses an input form trigger, all form fields (including optional fields) must be included in the `input` object.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run. **Important**: If the agent uses an input form trigger, the `input` field is required and must include all fields defined in the form schema. Even fields marked as optional in the UI must be included in the requestâ€”use an empty string (`\"\"`) for optional fields without values. Omitting required form fields will result in a 500 error.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent. Required when the agent uses an input form trigger.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      