---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      