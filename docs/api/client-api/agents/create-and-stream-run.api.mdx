---
id: create-and-stream-run
title: "Create an agent run and stream the response"
description: "Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE)."
sidebar_label: "Create an agent run and stream the response"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: api/client-api/agents/glean-api-agents
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Create an agent run and stream the response"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/rest/api/v1/agents/runs/stream"}
  context={"endpoint"}
>
  
</MethodEndpoint>

:::info beta

This endpoint is in Beta. Expect changes and instability.

:::

Executes an [agent](https://developers.glean.com/agents/agents-api) run and returns the result as a stream of server-sent events (SSE).

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"description":"Payload for creating a run.","type":"object","required":["agent_id"],"properties":{"agent_id":{"type":"string","title":"Agent Id","description":"The ID of the agent to run."},"input":{"type":"object","title":"Input","description":"The input to the agent.","additionalProperties":true},"messages":{"type":"array","items":{"type":"object","properties":{"role":{"type":"string","title":"Role","description":"The role of the message.","example":"USER"},"content":{"title":"Content","description":"The content of the message.","type":"array","items":{"type":"object","properties":{"text":{"type":"string"},"type":{"type":"string","enum":["text"],"title":"ContentType"}},"required":["text","type"],"title":"MessageTextBlock"}}},"title":"Message"},"title":"Messages","description":"The messages to pass an input to the agent."},"metadata":{"type":"object","title":"Metadata","description":"The metadata to pass to the agent.","additionalProperties":true}},"title":"AgentRunCreate"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Success","content":{"text/event-stream":{"schema":{"type":"string","description":"The server will send a stream of events in server-sent events (SSE) format.","example":"id: 1\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\"Hello\",\"type\":\"text\"}]}]}\n\nid: 2\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\",\",\"type\":\"text\"}]}]}\n\nid: 3\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" I'm\",\"type\":\"text\"}]}]}\n\nid: 4\nevent: message\ndata: {\"messages\":[{\"role\":\"GLEAN_AI\",\"content\":[{\"text\":\" your\",\"type\":\"text\"}]}]}\n"}}}},"400":{"description":"Bad request"},"403":{"description":"Forbidden"},"404":{"description":"Not Found","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"type":"string","title":"ErrorResponse","description":"Error message returned from the server"}}}},"500":{"description":"Internal server error"}}}
>
  
</StatusCodes>


      